\begin{figure}
\textbf{Typing}\\

    \infrule[Var]
    {x\mathord{:}A \in \Gamma}
    {\typingG{x}{A}}

    \infax[Constant]
    {\typingG{c}{\iota}}

    \infrule[Binop]
    {\typingG{N}{\iota} \andalso \typingG{M}{\iota}}
    {\typingG{\binop{N}{M}}{\iota}}

    \infrule[Abs]
    {\typing{\Gamma,x\mathord{:}A}{N}{B}}
    {\typingG{\abs{x}{A}{N}}{\arrow{A}{B}}}

    \infrule[App]
    {\typingG{N}{\arrow{A}{B}} \andalso \typingG{M}{A}}
    {\typingG{\app{N}{M}}{B}}

    \infax[Null]
    {\typingG{\code{null}}{D?}}

    \infrule[Lift]
    {\typingG{N}{D}}
    {\typingG{\lift{N}}{D?}}

    \infrule[Case]
    {\typingG{N}{D?} \andalso \typingG{M}{A} \andalso \typing{\Gamma,x\mathord{:}D}{L}{A}}
    {\typingG{\case{N}{M}{x}{L}}{A}}

    \infrule[Cast]
    {\typingG{M}{A} \andalso \compat{A}{B}}
    {\typingG{\castP{M}{A}{p}{B}}{B}}

    \infax[Blame]
    {\typingG{\blame{p}}{A}}

\textbf{Compatibility}\\

    \infax[Compat-Base]
    {\compat{\iota}{\iota}}

    \infrule[Compat-Null-R]
    {\compat{A}{D}}
    {\compat{A}{D?}}

    \infrule[Compat-Null-L]
    {\compat{D}{A}}
    {\compat{D?}{A}}

    \infrule[Compat-Arrow]
    {\compat{A}{A'} \andalso \compat{B}{B'}}
    {\compat{\arrow{A}{B}}{\arrow{A'}{B'}}}

  \caption{Typing rules of the explicit language}\label{fig:typing}
\end{figure}
