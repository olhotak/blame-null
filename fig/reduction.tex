\begin{figure}
\infax[App]
{\red{(\abs{x}{A}{N})V}{\subst{N}{x}{V}}}

\infax[Cast-App]
{\red{\app{\castP{V}{\arrow{A}{B}}{p}{\arrow{A'}{B'}}}{W}}
     {\cast{\appP{V}{\castP{W}{A'}{\overline{p}}{A}}}{B}{p}{B'}}}

\infax[Cast-Null-Nullable]
{\red{\cast{\code{null}}{D?}{p}{E?}}{\code{null}}}

\infax[Cast-Lift-Nullable]
{\red{\cast{\lift{V}}{D?}{p}{E?}}{\lift{\cast{V}{D}{p}{E}}}}

\infax[Cast-Null-NonNull]
{\red{\cast{\code{null}}{D?}{p}{E}}{\blame{p}}}

\infax[Cast-Lift-NonNull]
{\red{\cast{\lift{V}}{D?}{p}{E}}{\cast{V}{D}{p}{E}}}

\infax[Cast-Base]
{\red{\cast{V}{\iota}{p}{\iota}}{V}}

\infax[Case-Null]
{\red{\case{\code{null}}{M}{x}{L}}{M}}

\infax[Case-NonNull]
{\red{\case{\lift{V}}{M}{x}{L}}{\subst{L}{x}{V}}}

\infrule[Ctx]
{\red{N}{M}}
{\red{\mathcal{E}[N]}{\mathcal{E}[M]}}

\infax[Err]
{\red{\mathcal{E}[\blame{p}]}{\blame{p}}}

%\infrule[App-CtxL]
%{\red{M}{M'}}
%{\red{\app{M}{N}}{\app{M'}{N}}}
%
%\infrule[App-CtxR]
%{\red{N}{N'}}
%{\red{\app{V}{N}}{\app{V}{N'}}}
%
%\infax[App-ErrL]
%{\red{\app{(\blame{p})}{N}}{\blame{p}}}
%
%\infax[App-ErrR]
%{\red{\app{V}{(\blame{p})}}{\blame{p}}}

$$ \mathcal{E} \Coloneqq [] \p \app{\mathcal{E}}{N} \p \app{V}{\mathcal{E}} \p \cast{\mathcal{E}}{A}{p}{B} \p \case{\mathcal{E}}{M}{x}{L} \p \lift{\mathcal{E}} \p \binop{\mathcal{E}}{M} \p \binop{V}{\mathcal{E}}$$
  \caption{Reduction rules of null blame calculus}\label{fig:reduction}
\end{figure}

